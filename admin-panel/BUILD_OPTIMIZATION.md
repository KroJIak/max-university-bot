# Оптимизация сборки Admin Panel

## Быстрая сборка с BuildKit

Для ускорения сборки используйте BuildKit:

```bash
# Включите BuildKit перед сборкой
export DOCKER_BUILDKIT=1
export COMPOSE_DOCKER_CLI_BUILD=1

# Или используйте скрипт
./build.sh

# Или напрямую через docker compose
DOCKER_BUILDKIT=1 COMPOSE_DOCKER_CLI_BUILD=1 docker compose build admin-panel
```

## Что было оптимизировано:

1. **Исключены ненужные платформы** - в `.dockerignore` добавлены `android/`, `ios/`, `linux/`, `macos/`, `windows/` (не нужны для web сборки)

2. **Оптимизирован порядок команд** - сначала копируются только `pubspec.yaml` и `pubspec.lock`, затем выполняется `flutter pub get` (кешируется, если зависимости не изменились)

3. **Копируются только необходимые файлы** - вместо `COPY . .` копируются только `lib/`, `web/` и `analysis_options.yaml`

4. **Использование BuildKit** - позволяет параллельную сборку и лучшее кеширование слоев

## Дополнительные рекомендации:

- При изменении только кода в `lib/` - пересборка будет быстрее, так как `flutter pub get` будет взят из кеша
- При изменении зависимостей в `pubspec.yaml` - пересборка займет больше времени, но это нормально
- Используйте `docker compose build --no-cache admin-panel` только если нужно полностью пересобрать без кеша

## Ожидаемое ускорение:

- Первая сборка: без изменений (все равно нужно скачать зависимости и собрать)
- Повторная сборка без изменений зависимостей: **в 2-3 раза быстрее** благодаря кешированию
- Повторная сборка с изменением только кода: **в 3-5 раз быстрее** благодаря кешированию `flutter pub get`

