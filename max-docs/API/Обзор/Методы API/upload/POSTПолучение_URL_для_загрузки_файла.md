# Получение URL для загрузки файла

POST`/uploads`

Возвращает URL для последующей загрузки файла.

Поддерживаются два типа загрузки:

  1. **Multipart upload** — более простой, но менее надежный способ. В этом случае используется заголовок `Content-Type: multipart/form-data`. Этот способ имеет ограничения:

     * Максимальный размер файла: 4 ГБ
     * Можно загружать только один файл за раз
     * Невозможно перезапустить загрузку, если она была остановлена
  2. **Resumable upload** — более надежный способ, если заголовок `Content-Type` не равен `multipart/form-data`. Этот способ позволяет загружать файл частями и возобновить загрузку с последней успешно загруженной части в случае ошибок.

Пример использования cURL для загрузки файла:

SHELL

Скопировать

`curl -i -X POST \ -H "Content-Type: multipart/form-data" \ -F "data=@movie.pdf" "%UPLOAD_URL%" `

Где %UPLOAD_URL% - это URL из результата метода в примере cURL запроса

**Для загрузки видео и аудио:**

  1. Когда получаем ссылку на загрузку видео или аудио (`POST /uploads` с `type` = `video` или `type` = `audio`), вместе с `url` в ответе приходит `token`, который нужно использовать в сообщении (когда формируете `body` с `attachments`) в `POST /messages`.

  2. После загрузки видео или аудио (по `url` из шага выше) сервер возвращает `retval`

  3. C этого момента можно использовать `token`, чтобы прикреплять вложение в сообщение бота

Механика отличается от `type` = `image` | `file`, где `token` возвращается в ответе на загрузку изображения или файла

## [](#Авторизация)Авторизация

`access_token`  
apiKey 

> Передача токена через query-параметры больше не поддерживается — используйте заголовок `Authorization: <token>`

Токен для вызова HTTP-запросов присваивается при создании бота — его можно найти в разделе платформы MAX для партнёров **Чат-бот и мини-приложение** → **Настроить**

Рекомендуем не разглашать токен посторонним, чтобы они не получили доступ к управлению ботом. Токен может быть отозван за нарушение Правил платформы

## [](#Параметры)Параметры

`type`  
enum UploadType

Enum: `"image"` `"video"` `"audio"` `"file"`

Тип загружаемого файла

## [](#Результат)Результат

`url`  
string    

URL для загрузки файла

`token`  
string  optional  

Видео- или аудио-токен для отправки сообщения